apiVersion: apps/v1
kind: Deployment
metadata:
  name: <% $NAME %>
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ${name}
  strategy:
    type: RollingUpdatefgfh
  template:
    metadata:
      labels:
        app: <% $NAME%>
    spec:
      containers:
      - name: <%$imageName%>
        image: <%$containerName%>
        imagePullPolicy: Always
        ports:
         - containerPort: 8000
---   
apiVersion: v1
kind: Service
metadata:
  name: <%$NAME%>-service
  labels:
    app: <%$NAME%>
spec:
  type: ClusterIP
  ports:
    
     % for fn in `yq e '.ports[]' $VALUES`; do
      %# Indentation is even tracked across includes
  - port: <%$fn%>
    targetPort: <%$fn%>
    protocol: TCP
    #PROVA DONE
     % done
  
  selector:
    app: <%$NAME%>


